# ZED 2i Camera Configuration for KOBU-Ultra Robot
# Compatible with ZED SDK 5.0+ and JetPack 6+
zed_camera_driver:
  ros__parameters:
    # General configuration
    general:
      camera_model: "zed2i"
      camera_name: "zed"
      camera_id: 0                 # Camera ID (0 for first camera)
      svo_file: ""                  # Path to SVO file (empty for live camera)
      gpu_id: -1                    # GPU ID (-1 for automatic selection)
      publish_tf: true              # Publish TF transforms
      publish_raw_images: false     # Publish unrectified images

    # Video settings
    video:
      resolution: 2                 # HD1080: 1920x1080 (0:HD2K, 1:HD1200, 2:HD1080, 3:HD720, 4:SVGA, 5:VGA)
      fps: 30                       # Frame rate (15, 30, 60, 100)
      flip_image: false             # Flip image if camera is mounted upside down
      
    # CRITICAL: Depth configuration for ZED SDK 5.0+ on Jetson Orin NX
    depth:
      depth_mode: 6                 # NEURAL_LIGHT = 6 (optimized for Jetson Orin NX)
                                   # Options: NEURAL_PLUS=7, NEURAL=5, NEURAL_LIGHT=6
      min_depth: 0.3                # Minimum depth in meters
      max_depth: 20.0               # Maximum depth in meters  
      depth_stabilization: 30       # Stabilization strength (0-100, 0=disabled)
      confidence_threshold: 50      # Confidence threshold (0-100) 
      texture_confidence_threshold: 100  # Texture confidence threshold
      enable: true                  # Enable depth computation
      
    # Coordinate system
    coordinate:
      system: 3                     # RIGHT_HANDED_Z_UP = 3 (ROS standard)
                                   # 0:IMAGE, 1:LEFT_HANDED_Y_UP, 2:RIGHT_HANDED_Y_UP, 
                                   # 3:RIGHT_HANDED_Z_UP, 4:LEFT_HANDED_Z_UP
      units: 0                      # METER = 0
                                   # 0:METER, 1:CENTIMETER, 2:MILLIMETER, 3:INCH, 4:FOOT
      
    # Positional tracking
    tracking:
      enable_tracking: true         # Enable positional tracking
      enable_area_memory: true      # Enable area learning
      enable_imu_fusion: true       # Fuse IMU data with visual odometry
      enable_pose_smoothing: true   # Smooth pose estimation
      initial_world_transform: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0]  # Initial pose [x,y,z,roll,pitch,yaw]
      
    # Sensors (IMU for ZED 2i)
    sensors:
      enable_imu: true              # Enable IMU data publishing (200Hz on ZED 2i)
      
    # Point cloud settings
    point_cloud:
      enable: true                  # Enable point cloud generation
      max_distance: 15.0            # Maximum distance for points in meters
      min_distance: 0.3             # Minimum distance for points in meters
      
    # Frame IDs for TF tree (following ROS conventions)
    frame_ids:
      base_frame: "base_link"
      camera_frame: "zed_camera_link"
      left_camera_frame: "zed_left_camera_frame"
      right_camera_frame: "zed_right_camera_frame"
      camera_optical_frame: "zed_left_camera_optical_frame"
      imu_frame: "zed_imu_link"
      odom_frame: "odom"
      map_frame: "map"
      
    # Dynamic reconfigure parameters (can be changed at runtime)
    runtime:
      auto_exposure: true           # Auto exposure
      exposure: 50                  # Manual exposure value (if auto_exposure is false)
      gain: 50                      # Manual gain value (if auto_exposure is false)
      auto_white_balance: true      # Auto white balance
      white_balance: 4200           # Manual white balance temperature
      brightness: 4                 # Image brightness
      contrast: 4                   # Image contrast
      hue: 0                        # Image hue
      saturation: 4                 # Image saturation
      sharpness: 3                  # Image sharpness
      gamma: 8                      # Image gamma